#日志分析项目
> 日志分析项目涉及到如下环节：

- 数据采集 (ios/andriod/server)
- 数据传输 (php)
- 实时处理
	- 读取 logstash
	- 存储 elasticsearch
	- 统计展示 kibana
	- `输出到预处理 redis`
- `离线处理`
	- 离线预处理
		- 通用处理
		- 分类处理
		- 输出到上传odps 文件/flume
	- 上传odps
		- 数据转换
		- 当日数据计算
		- 历史数据计算
		- 结果数据输出mysql
- 数据查询
	- 查询
	- 定时邮件

>**本文侧重于描述离线预处理环节**

##一. 数据采集
###1.1 客户端
####1.1.1 自定义埋点
[接口文档](http://appapi.people.com.cn:100/total/index1.php) 和 [埋点事件](http://appapi.people.com.cn:100/static/click_v1.htm)
####1.1.2 `通用页面拦截日志`

##二. 数据传输
###2.1 数据格式化
###2.2 `服务器数据加入`

##三. 实时处理

##四. `离线处理`
###4.1 `离线预处理`
>说明：用于读取客户端传回来的日志，进行处理之后输入给分析系统，以保证日志的正确性和格式统一，加入通用处理与分类处理环节来进行一些初步加工，满足一些简单的数据需求

####4.1.1 日志读取
> 说明：从redis中读取日志数据

####4.1.2 通用处理
> 说明：进行一些ip，手机型号，时间修正的处理

####4.1.3 分类处理
> 说明：根据不同的日志类型进行个性化的处理，如用文章详情页的日志来统计文章的点击量

####4.1.4 日志输出
> 说明：将日志输出到redis、文件、flume等

###4.2 上传odps
###4.3 当日数据计算
###4.4 历史数据计算
###4.5 结果输出到mysql

##五. 报表系统
###5.1 查询
###5.2 邮件发送